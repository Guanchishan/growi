@use '@growi/core/scss/bootstrap/init' as bs;

@use '../button-styles';

@use '../variables' as sidebarVar;

.grw-primary-items :global {
  .btn {
    @extend %btn-basis;

    i {
      opacity: 0.7;

      &:hover,
      &:focus {
        opacity: 0.8;
      }
    }
  }
}

// Add indicator
.grw-primary-items :global {
  $btn-height: sidebarVar.$grw-sidebar-button-height;
  $btn-active-indicator-height: 34px;

  .btn {
    &.active {
      position: relative;

      // indicator
      &:after {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
        width: 3px;
        height: $btn-active-indicator-height;
        content: '';
        background-color: var(--bs-primary);
        transform: translateY(#{($btn-height - $btn-active-indicator-height) / 2});
      }
    }
  }
}

// == Colors
.grw-primary-items :global {
  .btn.btn-primary {
    @extend %btn-primary-color-vars;
  }
}
@include bs.color-mode(light) {
  .grw-primary-items :global {
    .btn-primary {
      --bs-btn-color: var(--grw-sidebar-nav-btn-color, var(--grw-primary-600));
      --bs-btn-hover-bg: var(--grw-sidebar-nav-btn-hover-bg, var(--grw-highlight-300));
    }
  }
}
@include bs.color-mode(dark) {
  .grw-primary-items :global {
    .btn-primary {
      --bs-btn-color: var(--grw-sidebar-nav-btn-color, var(--grw-primary-300));
      --bs-btn-hover-bg: var(--grw-sidebar-nav-btn-hover-bg, var(--grw-highlight-700));
    }
  }
}

// Animation
.grw-primary-items :global {
  .btn .material-symbols-outlined {
    @keyframes notice {
      8% { transform:rotate(6deg) translateX(-2px); }
      18% { transform:rotate(-6deg) translateX(2px); }
      28% { transform:rotate(4deg) translateX(-1px); }
      38% { transform:rotate(-2deg) translateX(1px); }
      45% { transform:rotate(1deg) translateX(0px); }
    }
    // memo: 0.8s
    // @keyframes notice {
    //   10% { transform:rotate(8deg); }
    //   25% { transform:rotate(-8deg); }
    //   40% { transform:rotate(5deg); }
    //   55% { transform:rotate(-3deg); }
    //   70% { transform:rotate(0%); }
    // }
    // @keyframes notice {
    //   10% { transform:translateX(3px); }
    //   20% { transform:translateX(0%); }
    //   25% { transform:translateX(2px); }
    //   27% { transform:translateX(0%); }
    // }

    &:local  {
      &:hover {
        transform-origin: center top;
        // infinite ease both はプレビュー用に繰り返している
        animation: notice 1.2s infinite ease both;
      }
    }
  }
}
